

var products = [{
    "image": "https://i.imgur.com/WE3jIvZ.jpg ",
    "name": "Clear Lip Gloss",
    "description": "Makeup for Developer ",
    "price": "10.00",
    "category": "LipGlosses"
  },

  {
    "image": "https://i.imgur.com/7kCboQ0.jpg.jpg ",
    "name": "Hot Pink Lip Gloss",
    "description": "Makeup for Developer ",
    "category": "makeup",
    "price": "8.00",
    "category": "LipGlosses",
  },

  {
    "image": "https://i.imgur.com/9RkfQ6q.jpg ",
    "name": "Beige Lip Gloss",
    "description": "Makup for Developer ",
    "category": "LipGlosses",
    "price": "9.00"
  },
  {
    "image": "https://i.imgur.com/lifFWTr.jpg ",
    "name": "Pink Lip Gloss",
    "description": "Makeup for Developer ",
    "price": "12.00",
    "category": "LipGlosses"
  },
  {
    "image": "https://i.imgur.com/NaWbdb7.jpg. ",
    "name": "Red Lipstick",
    "description": "Makeup for Developer ",
    "price": "11.00",
    "category": "Lipsticks"
  },

  {
    "image": "https://i.imgur.com/dtb1JYK.jpg. ",
    "name": "Maroon Lipstick",
    "description": "Makeup for Developer ",
    "price": "10.00",
    "category": "Lipsticks"
  },
  {
    "image": "https://i.imgur.com/WlmXo2D.jpg ",
    "name": "Light Red Lipstick",
    "description": "Makeup for Developer ",
    "price": "10.00",
    "category": "Lipsticks"
  },
  {
    "image": "https://i.imgur.com/YUaVvqn.jpg ",
    "name": "Brown Lipstick",
    "description": "Makeup for Developer ",
    "price": "10.00",
    "category": "Lipsticks"
  },
  {
    "image": "https://i.imgur.com/FKPSYT6.jpg",
    "name": "Pinkish Red Lip Stick",
    "description": "Makeup for Developer ",
    "price": "10.00",
    "category": "Lipsticks"
  },
  {
    "image": "https://i.imgur.com/yreZrmX.jpg ",
    "name": "Set of 9 Pink Brushes",
    "description": "Makeup for Developer ",
    "price": "15.00",
    "category": "Brushes"
  },
  {
    "image": "https://i.imgur.com/hBp2ffv.jpg",
    "name": "Set of 14 Brushes",
    "description": "Makeup for Developer ",
    "price": "15.00",
    "category": "Brushes"
  },
  {
    "image": "https://i.imgur.com/dUm7Btl.jpg ",
    "name": "Set of 6 Brushes",
    "description": "Makeup for Developer ",
    "price": "15.00",
    "category": "Brushes"
  },
  {
    "image": "https://i.imgur.com/czk7tD6.jpg ",
    "name": "Set of 3 Brushes",
    "description": "Makeup for Developer ",
    "price": "15.00",
    "category": "Brushes"
  },
  {
    "image": "https://i.imgur.com/ZABfxIY.jpg ",
    "name": "Set of 15 brushes",
    "description": "Makeup for Developer ",
    "price": "15.00",
    "category": "Brushes"
  },
  {
    "image": "https://i.imgur.com/6iRKyVk.jpg ",
    "name": "Full eyelashers",
    "description": "Makeup for Developer ",
    "price": "8.00",
    "category": "Accesories"
  },
  {
    "image": "https://i.imgur.com/e0lwjIt.jpg ",
    "name": "Wispie eyelashers",
    "description": "Makeup for Developer ",
    "price": "8.00",
    "category": "Accesories"
  },
  {
    "image": "https://i.imgur.com/q1yMnLu.jpg ",
    "name": "Full eyelashers",
    "description": "Makeup for Developer ",
    "price": "8.00",
    "category": "Accesories"
  },
  {
    "image": "https://i.imgur.com/ogfWzVT.jpg ",
    "name": "Red beauty blender",
    "description": "Makeup for Developer ",
    "price": "5.00",
    "category": "Accesories"
  },
  {
    "image": "https://i.imgur.com/bBMJZ7H.jpg ",
    "name": "Beige beauty blender",
    "description": "Makeup for Developer ",
    "price": "5.00",
    "category": "Accesories"
  },
  {
    "image": "https://i.imgur.com/WiNQJZ3.jpg ",
    "name": "Hot pink beauty blender",
    "description": "Makeup for Developer ",
    "price": "5.00",
    "category": "Accesories"
  },
  {
    "image": "https://i.imgur.com/ZLHhCr7.jpg ",
    "name": " pink beauty blender",
    "description": "Makeup for Developer ",
    "price": "5.00",
    "category": "Accesories"
  },
  {
    "image": "https://i.imgur.com/od8OmlN.jpg ",
    "name": "Teal Makeup Bag",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "MakeupBags"
  },
  {
    "image": "https://i.imgur.com/ymRvbNR.jpg",
    "name": "Black Makeup Bag",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "MakeupBags"
  },
  {
    "image": "https://i.imgur.com/plkOTpw.jpg ",
    "name": "Rose Gold Makeup Bad",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "MakeupBags"
  },
  {
    "image": "https://i.imgur.com/nVqUjTe.jpg",
    "name": "Hot Pink Makeup Bag",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "MakeupBags"
  },
  {
    "image": "https://i.imgur.com/0DiCkV9.jpg",
    "name": "Fantasy Palette",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "Palettes"
  },
  {
    "image": "https://i.imgur.com/rscsMZY.jpg",
    "name": "Shimmer Palette",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "Palettes"
  },
  {
    "image": "https://i.imgur.com/zhmb9Wk.jpg",
    "name": "Earth Tones Palette",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "Palettes"
  },
  {
    "image": "https://i.imgur.com/twLgJib.jpg",
    "name": "Halloween Palette",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "Palettes"
  },
  {
    "image": "https://i.imgur.com/uzGTPPm.jpg",
    "name": "Variety Palette ",
    "description": "Makeup for Developer ",
    "price": "20.00",
    "category": "Palettes"
  }
];

var selectedProducts = []
var cart = {
  items: [],
  total: 0,
  numberItems: 0,
  shipping: 3.99
}



function buildDom() {
  var productRow = document.getElementById('product-row');
  //var myRow = document.getElementById("product-row");
  productRow.innerHTML = "";

  var domArray = products;
  if (selectedProducts[0] != undefined) {
    products = selectedProducts;
  }
  for (var i = 0; i < products.length; i++) {

    var div = document.createElement('div');
    div.setAttribute('class', 'col-sm-4');
    var heading = document.createElement('h3');
    var name = document.createTextNode(products[i].name);


    var pic = document.createElement('img');
    pic.setAttribute('src', products[i].image);
    heading.appendChild(name);

    var p = document.createElement('p');
    var description = document.createTextNode(products[i].description);
    p.appendChild(description);

    var dollarsign = document.createTextNode('$');
    var price = document.createTextNode("$" + products[i].price);

    var cartButton = document.createElement('button');
    cartButton.setAttribute('index', i);
    cartButton.setAttribute("onclick", "getProductsInfo(this.getAttribute('index'))");
    var cartIcon = document.createElement('span');
    cartIcon.setAttribute('class', 'fa fa-shopping-cart');
    cartButton.appendChild(cartIcon);


    //create an input element
    var input = document.createElement('input');
    input.type = 'number';
    input.value = 1;
    input.min = 0;
    input.max = 100;
    input.setAttribute('class', 'product-input');
    input.setAttribute('id', 'product-qty' + i);


    var wishListButton = document.createElement('button');
    wishListButton.setAttribute("onclick", "addToWishList(this.getAttribute('index'))");
    var wishListIcon = document.createElement("span");
    wishListIcon.setAttribute("class", "fa fa-heart");
    wishListButton.appendChild(wishListIcon);


    div.appendChild(heading);
    div.appendChild(pic);
    div.appendChild(p);
    div.appendChild(price);
    div.appendChild(cartButton);
    div.appendChild(wishListButton);


    productRow.appendChild(div);



  } //end of forloop
  //products=domArray;
} //endoffunction

function loadCart() {
  //alert("loadcart function started")
  //  var savedcart = localStorage.getItem(JSON.parse("userCart"));
  //var getObject = JSON.parse(localStorage.getItem('userCart'));
  //alert(JSON.stringify(getObject.items));
  //cart.items = getObject.items

  buildCart();
}

window.onload = buildDom();
window.onload = loadCart();

//////////////////////////////////////////////////////////////


function sortCategoryFunction() {
  //alert("ok");
  var checkBox = document.getElementsByClassName("sortByCategory");  //alert(checkBox.length)

  var categories = [];
  for (var i = 0; i < checkBox.length; i++) {
    //alert(checkBox[2].value);
    if (checkBox[i].checked) {
  var checked = checkBox[i]
      //alert(checked.value);
      categories.push(checked);
    }
  } //end of for


  for (k = 0; k < categories.length; k++) {
    var item = categories[k].value;

    for (j = 0; j < products.length; j++) {

      if (products[j].category === item) {
        // console.log(products[j])
        selectedProducts.push(products[j]);
      } //end of if
    } //end of for
  } //end of for

  console.log(selectedProducts.length)
  buildDom();

} //end of function
///////////////////////////////////////////////////////////


//listView
document.getElementById("list-view").onclick = function listView() {
  //alert("Hello List");
  var row = document.getElementById('product-row')
  row.style.display = "inline";
  row.style.width = "100%"
}

//gridView
document.getElementById("grid-view").onclick = function gridview() {

  var row = document.getElementById("product-row")
  row.style.display = "";
  row.style.width = "100%"
} //end of grid and list view
//////////////////////////////

function selectFunction() {
  var selectEl = document.getElementById('sortByChoice');
  var option = selectEl.options[selectEl.selectedIndex].value;
//alert(option + 'this is the option tag')

  if (option == "Low To High") {

    products.sort(ascendingOrder);

  } //end of if
  else if (selectEl.selectedIndex === 1) {


    products.sort(descendingOrder);
  } //end esle if
  else {

    products.sort(alphabeticalOrder);
  } //end of else
  buildDom();
} // end of function

///////////////////////////////////////////////////////////////////////////////////////////
function ascendingOrder(a, b) {

  for (var i = 0; i < products.length; i++) {
    // alert(parseInt(products[i].price));
    return parseFloat(a.price) - parseFloat(b.price);
    //alert(JSON.stringify(products))
  }
} //end of function

function descendingOrder(a, b) {
  for (var i = 0; i < products.length; i++) {
    return parseFloat(b.price) - parseFloat(a.price);
  }
}

function alphabeticalOrder(a, b) {

  for (var i = 0; i < products.length; i++) {
    if (a.name > b.name) {
      return 1;
    }

    if (a.name < b.name) {
      return -1;
    }

    return 0;

  }
}



//////////////////////////////////////////


//function to get products on clicking the Cart or Wish list button

function getProductsInfo(index) {
  let quantity = 1;
  var product = {
    Id: index,
    name: products[index].name,
    description: products[index].description,
    price: products[index].price,
    quantity: quantity,
    amount: products[index].price

  }


  var productInCart = false;
  for (var i = 0; i < cart.items.length; i++) {

    if (cart.items[i].Id === index) {
      productInCart = true;
      cart.items[i].quantity = cart.items[i].quantity + 1;
      //cart.items[i].quantity=(product.quantity + cart.items[i].quantity);
    } // end of if
  } // end of for

  if (!productInCart) {
    cart.items.push(product);
  //  localStorage.setItem("userCart", JSON.stringify(cart.items));
  }

  buildCart();


} //end of function

// buildCart function

function buildCart() {
  //alert("item added")
  var cartItems = cart.items;
  //alert(JSON.stringify(cartItems));
  var table = document.getElementById("tableRow");
  while (table.children.length) {
    table.removeChild(table.children[0]);
  } //end of buildCart Function

  for (var key in cartItems) {
    var item = cartItems[key];
    var row = document.createElement("tr");

    var productNameCell = document.createElement("td");
    var productName = document.createTextNode(item.name);
    productNameCell.appendChild(productName);

    var amountCell = document.createElement("td");
    var amount = item.amount;
    var amountText = document.createTextNode(amount);
    amountCell.appendChild(amountText);

    var quantityCell = document.createElement("td");
    var quantityText = document.createTextNode(item.quantity);
    quantityCell.appendChild(quantityText);

    var increaseButtonCell = document.createElement('td');
    var increaseButton = document.createElement('button');
    var increaseButtonText = document.createTextNode('+');
    increaseButton.setAttribute('class', 'btn btn-success')
    increaseButton.appendChild(increaseButtonText);
    increaseButtonCell.appendChild(increaseButton);
    increaseButton.setAttribute('index', cartItems[key].Id);
    increaseButton.setAttribute("onclick", "increaseQuantity(this.getAttribute('index'))");


    var decreaseButtonCell = document.createElement("td");
    var decreaseButton = document.createElement("button");
    var decreaseButtonText = document.createTextNode("-");
    decreaseButton.setAttribute("class", "btn btn-success");
    decreaseButton.appendChild(decreaseButtonText);
    decreaseButton.setAttribute("index", cartItems[key].Id);
    decreaseButton.setAttribute("onclick", "decreaseQuantity(this.getAttribute('index'))");
    decreaseButtonCell.appendChild(decreaseButton);

    var priceCell = document.createElement("td");
    var priceText = document.createTextNode(item.price);
    priceCell.appendChild(priceText);


    var descriptionCell = document.createElement("td");
    var description = document.createTextNode(item.description);
    descriptionCell.appendChild(description);


    var quantityCell = document.createElement("td");
    var quantity = document.createTextNode(item.quantity);

    quantityCell.setAttribute('index', cartItems[key].Id);
    quantityCell.appendChild(quantity);

    var priceCell = document.createElement("td");
    var price = document.createTextNode(item.price);
    priceCell.appendChild(price);

    var removeItemCell = document.createElement("td");
    var removeButton = document.createElement("button");
    removeButton.innerHTML = "Remove Product";
    removeButton.setAttribute('class', 'btn btn-primary');
    removeButton.setAttribute('index', item.Id);
    removeButton.setAttribute("onclick", "removeItem(this.getAttribute('index'))");
    removeItemCell.appendChild(removeButton);

    row.appendChild(productNameCell);
    row.appendChild(descriptionCell);
    row.appendChild(priceCell);
    row.appendChild(amountCell);
    row.appendChild(quantityCell);
    row.appendChild(increaseButtonCell);
    row.appendChild(decreaseButtonCell);
    row.appendChild(removeButton);

    table.appendChild(row)

  } //end of for loop



displayCartTotal()
} //end of function buildCart

function productTotal() {}


function removeItem(index) {
  for (var i = 0; i < cart.items.length; i++) {
    if (cart.items[i].Id === index) {
      document.getElementById("productsTable").innerHTML = "";
      cart.items.splice(i, 1);

      break;
    } //end of if

  } //end of For
}//end of removeItem

  function decreaseQuantity(index) {
    for (var i = 0; i < cart.items.length; i++) {
      if (cart.items[i].Id === index) {
        cart.items[i].quantity--;
        cart.items[i].amount = cart.items[i].quantity * cart.items[i].price;

        if (cart.items[i].quantity <= 0) {
          removeItem(index);
        } //end of if

      } //end of if
    } //end of for
    //  productTotal();
    buildCart();
  } //end of function




//if (cart.items.length == 0) {
  //document.getElementById("topCartDisplay").value == 0;
//}

function increaseQuantity(index) {
  for (var i = 0; i < cart.items.length; i++) {
    if (cart.items[i].Id === index) {
      cart.items[i].quantity++;
      cart.items[i].amount = cart.items[i].quantity * cart.items[i].price;
    //  if (cart.items[i].quantity <= 0) {


        //removeQuantityItem(index);

    //} //end of if

    } //end of if
  } //end of for

  buildCart();
//productTotal();
  ///alert(index)
} //end of function


function displayCartQuantity() {
  if (cart.numberItems > 0) {
    document.getElementById("topCartDisplay").value = cart.numberItems;
  }
}

function displayCartTotal(){
  for(var i=0; i<cart.items.length; i++){


  //  alert(JSON.stringify(cart.items));
  }
}
